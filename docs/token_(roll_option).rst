================================
token (roll option) - MapToolDoc
================================

.. contents::
   :depth: 3
..

.. container:: noprint
   :name: mw-page-base

.. container:: noprint
   :name: mw-head-base

.. container:: mw-body
   :name: content

   .. container:: mw-indicators

   .. rubric:: token (roll option)
      :name: firstHeading
      :class: firstHeading

   .. container:: mw-body-content
      :name: bodyContent

      .. container::
         :name: siteSub

         From MapToolDoc

      .. container::
         :name: contentSub

      .. container:: mw-jump
         :name: jump-to-nav

         Jump to: `navigation <#mw-head>`__, `search <#p-search>`__

      .. container:: mw-content-ltr
         :name: mw-content-text

         .. container:: toc
            :name: toc

            .. container::
               :name: toctitle

               .. rubric:: Contents
                  :name: contents

            -  `1 [token():] Roll
               Option <#.5Btoken.28.29:.5D_Roll_Option>`__

               -  `1.1 Usage <#Usage>`__
               -  `1.2 Examples <#Examples>`__
               -  `1.3 See Also <#See_Also>`__

         .. rubric:: [token():] Roll Option
            :name: token-roll-option

         .. container::

            Â Note: This function can only be used in a `Trusted
            Macro </rptools/wiki/Trusted_Macro>`__

         .. container::

            \* **Introduced in version 1.3.b48**

         **token** is a macro function that allows an associated code
         block to be executed as though it were executing with a
         specified token as the context. This allows the code block to
         use properties of the token without special coding.

         This "context" function lasts only for the given code block.
         References to variables within the code block will still be
         available when the code block finishes. (Variables belong to
         the macro, while properties belong to the token.)

         .. rubric:: Usage
            :name: usage

         .. container:: mw-geshi mw-code mw-content-ltr

            .. container:: mtmacro source-mtmacro

               #. .. code:: de1

                     [token(identifier): single_statement]

         .. container:: mw-geshi mw-code mw-content-ltr

            .. container:: mtmacro source-mtmacro

               #. .. code:: de1

                     [token(identifier), code: {

               #. .. code:: de1

                        statement1

               #. .. code:: de1

                        statement2

               #. .. code:: de1

                     }]

         The *identifier* is the name of the token. The search first
         checks to see if the specified string is the Name of any token
         (i.e. matches `token.name </rptools/wiki/token.name>`__), then
         it checks GMName (i.e. matches
         `token.gm_name </rptools/wiki/token.gm_name>`__), and last it
         checks the unique `token
         id </maptool/index.php?title=TokenID&action=edit&redlink=1>`__
         (this is a 32-character string generated by MapTool).

         If there are multiple tokens with the same name, such as
         **Goblin**, then the *GM Name* field of the token should be
         unique so that it can be used to select tokens. Note that the
         `getAllTokens() </maptool/index.php?title=Macros:Functions:getAllTokens()&action=edit&redlink=1>`__
         and related functions return a list of token ids.

         .. rubric:: Examples
            :name: examples

         .. container:: mw-geshi mw-code mw-content-ltr

            .. container:: mtmacro source-mtmacro

               #. .. code:: de1

                     [h, token("Goblin 21"): health = floor(100*HP/HPmax)]

               #. .. code:: de1

                     The healthbar of <b>Goblin 21</b> should be at [r: health]%.

         If **Goblin 21** has 32 hit points and a maximum hit points of
         40 (and these numbers are stored in **HP** and **HPmax**
         properties, respectively), the output produced will be:

         ``The healthbar of Goblin 21 should be at 80%.``
         .. rubric:: See Also
            :name: see-also

         `currentToken() </rptools/wiki/currentToken>`__,
         `switchToken() </rptools/wiki/switchToken>`__,
         `floor() </rptools/wiki/floor>`__.

      .. container:: printfooter

         Retrieved from
         "http://lmwcs.com/maptool/index.php?title=token_(roll_option)&oldid=4189"

      .. container:: catlinks
         :name: catlinks

         .. container:: mw-normal-catlinks
            :name: mw-normal-catlinks

            `Categories </rptools/wiki/Special:Categories>`__:

            -  `Roll Option </rptools/wiki/Category:Roll_Option>`__
            -  `Branching Roll
               Option </rptools/wiki/Category:Branching_Roll_Option>`__

         --------------

         `MapTool </rptools/wiki/Category:MapTool>`__ >
         `Macro </rptools/wiki/Category:Macro>`__ > `Roll
         Option </rptools/wiki/Category:Roll_Option>`__
         `MapTool </rptools/wiki/Category:MapTool>`__ >
         `Macro </rptools/wiki/Category:Macro>`__ > `Roll
         Option </rptools/wiki/Category:Roll_Option>`__ > `Branching
         Roll Option </rptools/wiki/Category:Branching_Roll_Option>`__

      .. container:: visualClear

.. container::
   :name: mw-navigation

   .. rubric:: Navigation menu
      :name: navigation-menu

   .. container::
      :name: mw-head

      .. container::
         :name: p-personal

         .. rubric:: Personal tools
            :name: p-personal-label

         -  `Log
            in </maptool/index.php?title=Special:UserLogin&returnto=token+%28roll+option%29>`__

      .. container::
         :name: left-navigation

         .. container:: vectorTabs
            :name: p-namespaces

            .. rubric:: Namespaces
               :name: p-namespaces-label

            -  `Page </rptools/wiki/token_(roll_option)>`__
            -  `Discussion </rptools/wiki/Talk:token_(roll_option)>`__

         .. container:: vectorMenu emptyPortlet
            :name: p-variants

            .. rubric:: Variants\ ` <#>`__
               :name: p-variants-label

            .. container:: menu

      .. container::
         :name: right-navigation

         .. container:: vectorTabs
            :name: p-views

            .. rubric:: Views
               :name: p-views-label

            -  `Read </rptools/wiki/token_(roll_option)>`__
            -  `View
               source </maptool/index.php?title=token_(roll_option)&action=edit>`__
            -  `View
               history </maptool/index.php?title=token_(roll_option)&action=history>`__

         .. container:: vectorMenu emptyPortlet
            :name: p-cactions

            .. rubric:: More\ ` <#>`__
               :name: p-cactions-label

            .. container:: menu

         .. container::
            :name: p-search

            .. rubric:: Search
               :name: search

            .. container::
               :name: simpleSearch

   .. container::
      :name: mw-panel

      .. container::
         :name: p-logo

         ` </rptools/wiki/Main_Page>`__

      .. container:: portal
         :name: p-navigation

         .. rubric:: Navigation
            :name: p-navigation-label

         .. container:: body

            -  `Main page </rptools/wiki/Main_Page>`__
            -  `Random page </rptools/wiki/Special:Random>`__
            -  `Help <https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents>`__

      .. container:: portal
         :name: p-Basic_Usage

         .. rubric:: Basic Usage
            :name: p-Basic_Usage-label

         .. container:: body

            -  `Tutorials </rptools/wiki/Category:Tutorial>`__
            -  `Chat Commands </rptools/wiki/Chat_Commands>`__
            -  `Dice Expressions </rptools/wiki/Dice_Expressions>`__
            -  `Glossary </rptools/wiki/Glossary>`__

      .. container:: portal
         :name: p-Macro_Reference

         .. rubric:: Macro Reference
            :name: p-Macro_Reference-label

         .. container:: body

            -  `List of
               Functions </rptools/wiki/Category:Macro_Function>`__
            -  `Roll Options </rptools/wiki/Category:Roll_Option>`__
            -  `Special
               Variables </rptools/wiki/Category:Special_Variable>`__
            -  `Macro Cookbook </rptools/wiki/Category:Cookbook>`__

      .. container:: portal
         :name: p-Editors

         .. rubric:: Editors
            :name: p-Editors-label

         .. container:: body

            -  `Editor Discussion </rptools/wiki/Editor>`__
            -  `Recent Changes </rptools/wiki/Special:RecentChanges>`__

      .. container:: portal
         :name: p-tb

         .. rubric:: Tools
            :name: p-tb-label

         .. container:: body

            -  `What links
               here </rptools/wiki/Special:WhatLinksHere/token_(roll_option)>`__
            -  `Related
               changes </rptools/wiki/Special:RecentChangesLinked/token_(roll_option)>`__
            -  `Special pages </rptools/wiki/Special:SpecialPages>`__
            -  `Printable
               version </maptool/index.php?title=token_(roll_option)&printable=yes>`__
            -  `Permanent
               link </maptool/index.php?title=token_(roll_option)&oldid=4189>`__
            -  `Page
               information </maptool/index.php?title=token_(roll_option)&action=info>`__

.. container::
   :name: footer

   -  This page was last modified on 14 April 2010, at 15:18.

   -  `Privacy policy </rptools/wiki/MapToolDoc:Privacy_policy>`__
   -  `About MapToolDoc </rptools/wiki/MapToolDoc:About>`__
   -  `Disclaimers </rptools/wiki/MapToolDoc:General_disclaimer>`__

   -  |Powered by MediaWiki|

   .. container::

.. |Powered by MediaWiki| image:: /maptool/resources/assets/poweredby_mediawiki_88x31.png
   :width: 88px
   :height: 31px
   :target: //www.mediawiki.org/
